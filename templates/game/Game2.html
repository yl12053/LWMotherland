 {% extends 'base/base.html' %}

{% block title %}Game 2{% endblock %}

{% block style %}
<style>
  body {
    margin: 0px;
    background-image: url(https://images.theconversation.com/files/223729/original/file-20180619-126566-1jxjod2.jpg?ixlib=rb-1.1.0&q=45&auto=format&w=1200&h=675.0&fit=crop);
    background-size:100vw 110vh;
    
  }
  video {
    pointer-events: none;
  }
  video::-webkit-media-controls {
    display: none;
  }
  #container {
    position: absolute;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
    overflow: hidden ;
  }
  .trans {
    visibility: hidden;
    opacity: 0;
    transition: visibility 0s, opacity 0.5s linear;
  }
  .transAct {
    visibility: visible;
    opacity: 1;
  }
  .noselect {
    -webkit-touch-callout: none;
      -webkit-user-select: none;
        -khtml-user-select: none;
        -moz-user-select: none;
        -ms-user-select: none;
            user-select: none;
  }
  .centralize {
    position: absolute;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
  }
  .content_container {
  background-color: rgba(41, 103, 154, 0.5);
  border-radius: 5px;
  color:white;
  border-color: coral;
  border:solid;
  font:normal 1.1em RetroGaming;
  font-size:15px;
  margin: 20px auto 20px auto;
  padding: 50px;
  padding-bottom: 20px;
  line-height: 30px;
  width: 80%;
  margin-bottom: 0px;
}

.blank {
  background-color: lightblue;
  border-radius: 5px;
  display: inline-block;
  height: 12px;
  color:rgb(22, 7, 165);
  min-width: 100px;
  padding: 1px 5px 15px 5px;
  position: relative;
  text-align: center;
  white-space: nowrap;
  cursor: pointer;
}

.choice_cloud {
  /* background-color: yellow; */
  display: none;
  left: -50%;
  position: absolute;
  top: 25px;
  cursor: pointer;

  /* http://www.theappguruz.com/tag-tools/web/CSSAnimations/ */
  -webkit-backface-visibility: visible !important;
  backface-visibility: visible !important;
  -webkit-animation-name: flipInX;
  animation-name: flipInX;
  -webkit-animation-duration: 1s;
  animation-duration: 1s;
  -webkit-animation-fill-mode: both;
  animation-fill-mode: both;
  }
  @-webkit-keyframes flipInX {
  0% {
  -webkit-transform: perspective(400px) rotate3d(1, 0, 0, 90deg);
  transform: perspective(400px) rotate3d(1, 0, 0, 90deg);
  -webkit-transition-timing-function: ease-in;
  transition-timing-function: ease-in;
  opacity: 0;
  }
  40% {
  -webkit-transform: perspective(400px) rotate3d(1, 0, 0, -20deg);
  transform: perspective(400px) rotate3d(1, 0, 0, -20deg);
  -webkit-transition-timing-function: ease-in;
  transition-timing-function: ease-in;
  }
  60% {
  -webkit-transform: perspective(400px) rotate3d(1, 0, 0, 10deg);
  transform: perspective(400px) rotate3d(1, 0, 0, 10deg);
  opacity: 1;
  }
  80% {
  -webkit-transform: perspective(400px) rotate3d(1, 0, 0, -5deg);
  transform: perspective(400px) rotate3d(1, 0, 0, -5deg);
  }
  100% {
  -webkit-transform: perspective(400px);
  transform: perspective(400px);
  }
  }
  @keyframes flipInX {
  0% {
  -webkit-transform: perspective(400px) rotate3d(1, 0, 0, 90deg);
  transform: perspective(400px) rotate3d(1, 0, 0, 90deg);
  -webkit-transition-timing-function: ease-in;
  transition-timing-function: ease-in;
  opacity: 0;
  }
  40% {
  -webkit-transform: perspective(400px) rotate3d(1, 0, 0, -20deg);
  transform: perspective(400px) rotate3d(1, 0, 0, -20deg);
  -webkit-transition-timing-function: ease-in;
  transition-timing-function: ease-in;
  }
  60% {
  -webkit-transform: perspective(400px) rotate3d(1, 0, 0, 10deg);
  transform: perspective(400px) rotate3d(1, 0, 0, 10deg);
  opacity: 1;
  }
  80% {
  -webkit-transform: perspective(400px) rotate3d(1, 0, 0, -5deg);
  transform: perspective(400px) rotate3d(1, 0, 0, -5deg);
  }
  100% {
  -webkit-transform: perspective(400px);
  transform: perspective(400px);
  }
}

.choice {
  background-color: #4A829B;
  border-radius: 5px;
  box-shadow: 1px 2px 3px rgba(0,0,0,.3);
  color: white;
  margin: 0 5px 0 0;
  padding: 5px;
  white-space: nowrap;
  cursor: pointer;
}

.choice:hover {
  background-color: #6099b3;
  cursor: pointer;
}
p.a{
  font-size:1px
}
  

</style>
{% endblock %}
{% block script %}
<script src='/dynamic/g2dynam.js?hx={{ hx }}'></script>
<script src="/assets/js/question_fetcher.js"></script>
{% endblock %}

{% block content %}
<div id="container" class="noselect" style = "background-image:url(https://media.istockphoto.com/id/1269592684/vector/hud-ui-gui-futuristic-user-interface-screen-elements-high-tech-screen-for-video-game-sci-fi.jpg?s=170667a&w=0&k=20&c=OLFFN3o7ru9zZHql3zpuk8dXXNy9t_08XcDLzF8UE3c=);background-position: center;background-size: cover;;background-repeat:no-repeat">
  
  <div id="mainzone" style="height: calc(100% - 60px); width: 80%; display: none; border: 30px ridge rgba(128,121,126,1); border-radius: 0px; margin: auto;">
    <!-- <video muted loop style="position: fixed; top: 50%; left: 50%; transform: translate(-50%, -50%);">
      <source src="https://images.theconversation.com/files/223729/original/file-20180619-126566-1jxjod2.jpg?ixlib=rb-1.1.0&q=45&auto=format&w=1200&h=675.0&fit=crop">
    </video> <- Keep this, someone's job-->
    <div style="background-color: rgba(21, 14, 87, 0.7); border-radius: 5px; color: white; margin: 40px auto 20px auto; padding: 50px;padding-bottom:20px; width: 80%;color:aquamarine;font:normal 1.1em RetroGaming;border-color: coral;border:solid">
  <strong style="font-size:20px">Game 2: The Three forges in Changjiang</strong>
  <p style="font-size:15px" >Click the blanks to view pop-up word choices.</p>
</div>
<div class="content_container">
  
  1.  According to Article 1 of the Basic Law, Hong Kong is a/an <span class="blank" ><span class="text_container" id="q1">&nbsp;</span><span class="choice_cloud"><span class="choice">inalienable</span><span class="choice">important</span><span class="choice">transferrable</span><span class="choice">separable</span></span></span> part of China. <br></br><hr></hr>

  2. Article 5 of Basic Law states that the previous capitalist system and way of life shall remain unchanged in Hong Kong for <span class="blank" ><span class="text_container" id="q2">&nbsp;</span><span class="choice_cloud"><span class="choice">25</span><span class="choice">50</span><span class="choice">75</span><span class="choice">100</span></span></span> years.<br></br><hr></hr>

  3. The first letter in the alphabet is <span class="blank" ><span class="text_container" id="q3">&nbsp;</span><span class="choice_cloud"><span class="choice">a</span><span class="choice">b</span><span class="choice">c</span><span class="choice">d</span></span></span>.
<br></br><hr></hr>

4. I go to school <span class="blank" ><span class="text_container" id="q4">&nbsp;</span><span class="choice_cloud"><span class="choice">on</span><span class="choice">in</span><span class="choice">by</span><span class="choice">with</span></span></span> bus.
<br></br><hr></hr>

5. I go to school <span class="blank" ><span class="text_container" id="q5">&nbsp;</span><span class="choice_cloud"><span class="choice">on</span><span class="choice">in</span><span class="choice">by</span><span class="choice">with</span></span></span> foot.
<br></br><hr></hr>

6. My favourite teacher is <span class="blank" ><span class="text_container" id="q6">&nbsp;</span><span class="choice_cloud"><span class="choice">miss siu</span><span class="choice">ms lee</span><span class="choice">ms wong</span><span class="choice">Jay Leung</span></span></span>.
<br></br><hr></hr>
  
<button id="demo"  style="background-color:mediumaquamarine;cursor: pointer;color:blue"onclick="myFunction()">confirm</button>
<input type=button style="background-color:mediumaquamarine;cursor: pointer;color:blue"onClick="parent.location='https://LWMotherland.motszhin.repl.co/map'"
 value='return to map'>
</div>
</div>

<script>
  window.pDone = false;
  $("#mainzone").hide();
  function chan(){
    if (document.documentElement.clientHeight / 3 > document.documentElement.clientWidth / 4){
      $("#container").css("width", "100vw");
      $("#container").css("height", (3/4*100) + "vw");
    } else {
      $("#container").css("width", (4/3*100)+"vh");
      $("#container").css("height","100vh");
    }
  }
  var resizeObserver = new ResizeObserver(chan);
  resizeObserver.observe(document.body);
  chan();
  if ({{ cg }}){
      var v = $("<video class='centralize' muted>").append(
        $("<source>").prop("src", "/assets/video/Games/game2/game2cg.mp4")
      ).attr("id", "sv");
      if (document.documentElement.clientHeight / 9 <= document.documentElement.clientWidth / 16){
        v.css("width", "65vw");
      } else {
        v.css("height", "90vh");
      }
      $("#container").append(v);
      v[0].play();
  }
  {% if cg=="true" %}
  v[0].addEventListener('ended', function (event){
    v.remove();
  {% endif %}
    window.pDone = true;
    $("#mainzone").show();
  {% if cg=="true" %}
  }, false);
  {% endif %}
  // Load jquery
// https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js

var all_choices = $(".blank")
  .parent()
  .find(".choice_cloud");

$(".content_container").on("click", ".blank", function() {
  event.stopPropagation(); // Prevent the 'clicking anywhere hides it' function
  all_choices.hide("slow");
  var choiceCloud = $(this).find(".choice_cloud");
  choiceCloud.toggle();
});

$(".choice").click(function(event) {
  var myChoice = $(event.target);
  var isChoice = myChoice.is(".choice");
  event.stopPropagation(); // Prevent the 'clicking anywhere hides it' function
  if (isChoice) {
    //make sure I am a .choice element
    myChoice.closest(".blank")
      .find(".text_container")
      .text(myChoice.text());
    myChoice.parent().hide();
  }
});

// Clicking anywhere else hides it
$(document).on("click", function() {
  $(".choice_cloud").hide("slow");
});
const q1 = document.getElementById('q1');
const q2 = document.getElementById('q2');
const q3 = document.getElementById('q3');
const q4 = document.getElementById('q4');
const q5 = document.getElementById('q5');
const q6 = document.getElementById('q6');
console.log(q6)
function myFunction(){
  var a = ""
  var mark = 0
  if (q1.textContent.includes('inalienable')) {
  a=a+"\n"+('✅ Q1 correct');
  mark=mark+1
} else {
  a=a+"\n"+('⛔️ Q1 wrong');
}
  if (q2.textContent.includes('50')) {
  a=a+"\n"+('✅ Q2 correct');
  mark=mark+1
} else {
  a=a+"\n"+('⛔️ Q2 wrong');
}
  if (q3.textContent.includes('a')) {
  a=a+"\n"+('✅ Q3 correct');
  mark=mark+1
} else {
  a=a+"\n"+('⛔️ Q3 wrong');
  }
  if (q4.textContent.includes('by')) {
  a=a+"\n"+('✅ Q4 correct');
  mark=mark+1
} else {
  a=a+"\n"+('⛔️ Q4 wrong');
}
  if (q5.textContent.includes('on')) {
  a=a+"\n"+('✅ Q5 correct');
  mark=mark+1
} else {
  a=a+"\n"+('⛔️ Q5 wrong');
}
  if (q6.textContent.includes('Jay Leung')) {
  a=a+"\n"+('✅ Q6 correct');
  mark=mark+1
} else {
  a=a+"\n"+('⛔️ Q6 wrong');
  }
  console.log(a)
  alert(a+"\nmark: "+mark)
}
</script>
{% endblock %}
