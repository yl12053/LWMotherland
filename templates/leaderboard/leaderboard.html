{% extends 'base/base.html' %}

{% block title %}Motherland Leaderboard{% endblock %}

{% block style %}
<link rel="stylesheet" href="/assets/css/leaderboard.css">
{% endblock %}

{% block script %}
<script type="text/babel" src="/assets/js/leaderboard.js">
</script>
{% endblock %}

{% block content %}
<div id="app" style="display: none"></div>
<image id="img"></image>
<script>
  function parse(obj){
    return obj;
  }
</script>
<script type="text/python">
  from browser import window, aio
  import random
  import javascript
  dc = []
  async def gdc():
    global dc
    while True:
      arrs = [{"id": 1, "name": "group", "score": random.randint(0, random.randint(0, 500))}, {"id": 2, "name": "group2", "score": random.randint(0, 500)}, {"id": 3, "name": "group3", "score": random.randint(0, 500)}, {"id": 4, "name": "group4", "score": random.randint(0, 500)}, {"id": 5, "name": "group5", "score": random.randint(0, 500)}, {"id": 6, "name": "group6", "score": random.randint(0, 500)}, {"id": 7, "name": "group7", "score": random.randint(0, 500)}, {"id": 8, "name": "group8", "score": random.randint(0, 500)}]
      #arrs.sort(key=lambda x: x["score"], reverse=True)
      dc = arrs.copy()
      await aio.sleep(3)
      print("loop")
  def update_leaderboard():
    global dc
    rdict = {"success": True}
    rdict["leaders"] = dc.copy()
    rdict["leaders"].sort(key=lambda x: x["score"], reverse=True)
    rdict["maxScore"] = 500
    return window.parse(rdict)
  window.datUpload = update_leaderboard
  window.jQuery("#app").show()
  aio.run(gdc())

</script>
{% endblock %}